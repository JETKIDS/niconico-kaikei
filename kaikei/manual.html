<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>もうかりまっか - 操作マニュアル</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .manual-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
        }
        .manual-section {
            margin-bottom: 3rem;
            background-color: #fdfaf5;
            border-radius: 8px;
            padding: 2rem;
            border: 1px solid #d6c8b8;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
        }
        .manual-section h2 {
            color: #8b0000;
            border-bottom: 2px solid #a03030;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }
        .manual-section h3 {
            color: #4d3c2c;
            margin-top: 2rem;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        .step-list {
            counter-reset: step-counter;
            list-style: none;
            padding: 0;
        }
        .step-list li {
            counter-increment: step-counter;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background-color: #f5f0e8;
            border-left: 4px solid #a03030;
            border-radius: 4px;
            position: relative;
        }
        .step-list li::before {
            content: "ステップ " counter(step-counter);
            font-weight: bold;
            color: #8b0000;
            display: block;
            margin-bottom: 0.5rem;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }
        .feature-card {
            background-color: #e8e0d0;
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid #d6c8b8;
        }
        .feature-card h4 {
            color: #8b0000;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        .screenshot-placeholder {
            background-color: #d6c8b8;
            border: 2px dashed #a09080;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            color: #4d3c2c;
            margin: 1rem 0;
            font-style: italic;
        }
        .tip-box {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .tip-box::before {
            content: "💡 ヒント: ";
            font-weight: bold;
            color: #1976d2;
        }
        .warning-box {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .warning-box::before {
            content: "⚠️ 注意: ";
            font-weight: bold;
            color: #856404;
        }
        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background-color: #a03030;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        .back-button:hover {
            background-color: #d05050;
            transform: translateY(-2px);
            box-shadow: 2px 4px 12px rgba(0, 0, 0, 0.3);
        }
        .toc {
            background-color: #e8e0d0;
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }
        .toc h3 {
            color: #8b0000;
            margin-bottom: 1rem;
        }
        .toc ul {
            list-style: none;
            padding: 0;
        }
        .toc li {
            margin-bottom: 0.5rem;
        }
        .toc a {
            color: #4d3c2c;
            text-decoration: none;
            padding: 0.3rem 0;
            display: block;
            border-radius: 4px;
            padding-left: 1rem;
            transition: background-color 0.2s;
        }
        .toc a:hover {
            background-color: #d6c8b8;
            color: #8b0000;
        }
    </style>
</head>
<body>
    <button class="back-button" onclick="window.location.href='index.html'">
        ← メイン画面に戻る
    </button>

    <div class="container">
        <header>
            <h1>もうかりまっか <span class="version-display">操作マニュアル</span></h1>
        </header>

        <main>
            <div class="manual-container">
                <!-- 目次 -->
                <div class="toc">
                    <h3>📋 目次</h3>
                    <ul>
                        <li><a href="#overview">1. システム概要</a></li>
                        <li><a href="#getting-started">2. 初期設定・基本操作</a></li>
                        <li><a href="#store-management">3. 店舗管理</a></li>
                        <li><a href="#data-entry">4. データ入力</a></li>
                        <li><a href="#reports">5. レポート機能</a></li>
                        <li><a href="#data-management">6. データ管理・バックアップ</a></li>
                        <li><a href="#troubleshooting">7. トラブルシューティング</a></li>
                        <li><a href="#tips">8. 便利な使い方・ヒント</a></li>
                    </ul>
                </div>

                <!-- システム概要 -->
                <div class="manual-section" id="overview">
                    <h2>1. システム概要</h2>
                    
                    <h3>「もうかりまっか」とは</h3>
                    <p>「もうかりまっか」は、複数店舗の収支管理を効率的に行うための会計管理システムです。売上・仕入・各種費用の管理から、詳細なレポート作成まで、店舗経営に必要な機能を網羅しています。</p>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>🏪 多店舗管理</h4>
                            <p>複数の店舗を一元管理し、店舗間でのデータ比較や統合レポートの作成が可能です。</p>
                        </div>
                        <div class="feature-card">
                            <h4>📊 詳細レポート</h4>
                            <p>月別・年別の収支レポート、店舗比較、統合レポートなど多様な分析機能を提供します。</p>
                        </div>
                        <div class="feature-card">
                            <h4>💾 自動保存</h4>
                            <p>データは自動的に保存され、ブラウザを閉じても安全にデータが保持されます。</p>
                        </div>
                        <div class="feature-card">
                            <h4>📱 レスポンシブ対応</h4>
                            <p>PC・タブレット・スマートフォンなど、様々なデバイスで快適に利用できます。</p>
                        </div>
                    </div>

                    <div class="tip-box">
                        このシステムはブラウザ上で動作し、インターネット接続は不要です。データはお使いのデバイスに安全に保存されます。
                    </div>
                </div>

                <!-- 初期設定・基本操作 -->
                <div class="manual-section" id="getting-started">
                    <h2>2. 初期設定・基本操作</h2>

                    <h3>初回起動時の設定</h3>
                    <ol class="step-list">
                        <li>
                            <strong>ブラウザでindex.htmlを開く</strong><br>
                            システムが自動的に初期化され、デフォルト店舗が作成されます。
                        </li>
                        <li>
                            <strong>店舗情報の設定</strong><br>
                            画面上部の「店舗管理」をクリックし、デフォルト店舗の情報を実際の店舗情報に変更します。
                        </li>
                        <li>
                            <strong>基本操作の確認</strong><br>
                            各メニューをクリックして、システムの基本的な操作方法を確認します。
                        </li>
                    </ol>

                    <h3>画面構成</h3>
                    <div class="screenshot-placeholder">
                        [メイン画面のスクリーンショット]<br>
                        ヘッダー：タイトル、バージョン、店舗選択、保存状態<br>
                        ナビゲーション：各機能へのメニュー<br>
                        メインエリア：選択した機能の画面
                    </div>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>ヘッダー部分</h4>
                            <ul>
                                <li>タイトルとバージョン表示</li>
                                <li>現在選択中の店舗</li>
                                <li>データ保存状態</li>
                                <li>期間選択</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>ナビゲーションメニュー</h4>
                            <ul>
                                <li>売上管理</li>
                                <li>仕入れ管理</li>
                                <li>固定費</li>
                                <li>変動費</li>
                                <li>人件費</li>
                                <li>消費税</li>
                                <li>月々の返済</li>
                                <li>メーカー保証金</li>
                                <li>収支レポート</li>
                                <li>店舗管理</li>
                                <li>データ管理</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 店舗管理 -->
                <div class="manual-section" id="store-management">
                    <h2>3. 店舗管理</h2>

                    <h3>店舗の追加</h3>
                    <ol class="step-list">
                        <li>
                            <strong>店舗管理画面を開く</strong><br>
                            ナビゲーションメニューから「店舗管理」をクリックします。
                        </li>
                        <li>
                            <strong>新規店舗追加</strong><br>
                            「新規店舗追加」ボタンをクリックし、店舗情報を入力します。
                            <ul>
                                <li>店舗名（必須）</li>
                                <li>住所</li>
                                <li>開店日</li>
                                <li>備考</li>
                            </ul>
                        </li>
                        <li>
                            <strong>保存</strong><br>
                            「保存」ボタンをクリックして店舗情報を保存します。
                        </li>
                    </ol>

                    <h3>店舗の切り替え</h3>
                    <p>画面上部の店舗選択ドロップダウンから、作業したい店舗を選択できます。選択した店舗のデータのみが表示・編集対象となります。</p>

                    <div class="tip-box">
                        アクティブな店舗は緑色の「アクティブ」バッジで表示されます。データ入力時は、現在アクティブな店舗に自動的に関連付けられます。
                    </div>

                    <h3>店舗間でのデータ移動</h3>
                    <p>誤って別の店舗にデータを入力した場合、データ移動機能を使用して正しい店舗にデータを移動できます。</p>
                </div>

                <!-- データ入力 -->
                <div class="manual-section" id="data-entry">
                    <h2>4. データ入力</h2>

                    <h3>売上データの入力</h3>
                    <ol class="step-list">
                        <li>
                            <strong>売上データ入力画面を開く</strong><br>
                            「売上データ入力」をクリックします。
                        </li>
                        <li>
                            <strong>データ入力</strong><br>
                            以下の項目を入力します：
                            <ul>
                                <li>年・月（必須）</li>
                                <li>金額（必須）</li>
                                <li>備考（任意）</li>
                            </ul>
                        </li>
                        <li>
                            <strong>保存</strong><br>
                            「追加」ボタンをクリックしてデータを保存します。
                        </li>
                    </ol>

                    <h3>その他のデータ入力</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>仕入データ</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>メーカー名</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>固定費</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>カテゴリー（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>変動費</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>カテゴリー（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>人件費</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>消費税</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>月々の返済</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>返済先（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>メーカー保証金</h4>
                            <ul>
                                <li>年・月・金額（必須）</li>
                                <li>メーカー名（必須）</li>
                                <li>備考</li>
                            </ul>
                        </div>
                    </div>

                    <h3>データ入力時の注意点</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>バリデーション機能</h4>
                            <p>入力データは自動的にチェックされ、不正な値がある場合はエラーメッセージが表示されます。</p>
                        </div>
                        <div class="feature-card">
                            <h4>自動保存</h4>
                            <p>データは入力と同時に自動保存され、保存状態が画面上部に表示されます。</p>
                        </div>
                    </div>

                    <div class="warning-box">
                        データ入力時は、現在選択されている店舗に自動的に関連付けられます。入力前に正しい店舗が選択されていることを確認してください。
                    </div>
                </div>

                <!-- レポート機能 -->
                <div class="manual-section" id="reports">
                    <h2>5. レポート機能</h2>

                    <h3>月別レポート</h3>
                    <p>選択した年月の収支状況を詳細に表示します。売上、各種費用、利益が一目で確認できます。</p>

                    <h3>年別レポート</h3>
                    <p>年間の収支推移をグラフと表で表示します。月ごとの比較や年間トレンドの把握に便利です。</p>

                    <h3>統合レポート</h3>
                    <p>全店舗の収支を統合して表示します。企業全体の業績把握に活用できます。</p>

                    <h3>比較レポート</h3>
                    <p>店舗間の収益性を比較できます。各店舗の順位や利益率が表示されます。</p>

                    <div class="tip-box">
                        レポートはCSV形式でエクスポートできます。外部の表計算ソフトでさらに詳細な分析を行うことも可能です。
                    </div>
                </div>

                <!-- データ管理 -->
                <div class="manual-section" id="data-management">
                    <h2>6. データ管理・バックアップ</h2>

                    <h3>自動バックアップ機能</h3>
                    <p>システムは自動的にデータをバックアップし、最大10個のバックアップファイルを保持します。データ管理画面からバックアップ一覧を確認できます。</p>

                    <h3>データのエクスポート</h3>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>全データエクスポート</h4>
                            <p>全店舗の全データをJSON形式でエクスポートします。完全なバックアップとして活用できます。</p>
                        </div>
                        <div class="feature-card">
                            <h4>店舗別エクスポート</h4>
                            <p>特定の店舗のデータのみをエクスポートできます。店舗ごとの分析や移管に便利です。</p>
                        </div>
                        <div class="feature-card">
                            <h4>期間指定エクスポート</h4>
                            <p>指定した期間のデータのみをエクスポートできます。月次・年次レポート作成に活用できます。</p>
                        </div>
                        <div class="feature-card">
                            <h4>CSVエクスポート</h4>
                            <p>表計算ソフトで利用しやすいCSV形式でのエクスポートも可能です。</p>
                        </div>
                    </div>

                    <h3>データのインポート</h3>
                    <ol class="step-list">
                        <li>
                            <strong>ファイル選択</strong><br>
                            「ファイルを選択」ボタンをクリックし、インポートするJSONファイルを選択します。
                        </li>
                        <li>
                            <strong>重複データの処理</strong><br>
                            既存データと重複する場合の処理方法を選択できます：
                            <ul>
                                <li>重複をスキップ</li>
                                <li>重複を上書き</li>
                                <li>重複も追加</li>
                            </ul>
                        </li>
                        <li>
                            <strong>インポート実行</strong><br>
                            設定を確認して「インポート」ボタンをクリックします。
                        </li>
                    </ol>

                    <h3>重複データのクリーンアップ</h3>
                    <p>システムには重複データを自動検出・削除する機能があります。データ管理画面から「重複データクリーンアップ」を実行できます。</p>

                    <div class="tip-box">
                        重要なデータ操作の前には、必ずバックアップを作成することをお勧めします。
                    </div>

                    <div class="warning-box">
                        データはブラウザのローカルストレージに保存されます。ブラウザのデータを削除すると、保存されたデータも失われる可能性があります。
                    </div>
                </div>

                <!-- トラブルシューティング -->
                <div class="manual-section" id="troubleshooting">
                    <h2>7. トラブルシューティング</h2>

                    <h3>よくある問題と解決方法</h3>
                    
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>データが表示されない</h4>
                            <ul>
                                <li>正しい店舗が選択されているか確認</li>
                                <li>正しい年月が選択されているか確認</li>
                                <li>ブラウザを再読み込み</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>保存ができない</h4>
                            <ul>
                                <li>必須項目がすべて入力されているか確認</li>
                                <li>データ形式が正しいか確認（数値項目に文字が入っていないか等）</li>
                                <li>ブラウザのストレージ容量を確認</li>
                                <li>保存状態表示でエラー詳細を確認</li>
                                <li>ブラウザを再起動</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>レポートが表示されない</h4>
                            <ul>
                                <li>該当期間にデータが存在するか確認</li>
                                <li>店舗選択を確認</li>
                                <li>ブラウザのJavaScriptが有効か確認</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h4>画面が正しく表示されない</h4>
                            <ul>
                                <li>ブラウザのキャッシュをクリア</li>
                                <li>対応ブラウザを使用しているか確認</li>
                                <li>画面を再読み込み</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- 便利な使い方・ヒント -->
                <div class="manual-section" id="tips">
                    <h2>8. 便利な使い方・ヒント</h2>

                    <h3>効率的な運用のコツ</h3>
                    <ol class="step-list">
                        <li>
                            <strong>定期的なデータ入力</strong><br>
                            月末や週末など、定期的にデータを入力する習慣をつけましょう。
                        </li>
                        <li>
                            <strong>カテゴリーの統一</strong><br>
                            固定費・変動費のカテゴリー名を統一することで、より正確な分析が可能になります。
                        </li>
                        <li>
                            <strong>備考欄の活用</strong><br>
                            特別な事情や詳細情報を備考欄に記録しておくと、後で振り返る際に便利です。
                        </li>
                        <li>
                            <strong>定期的なバックアップ</strong><br>
                            月次でデータをエクスポートし、安全な場所に保存しておきましょう。
                        </li>
                    </ol>

                    <h3>自動バージョン管理</h3>
                    <p>システムは自動的にバージョンが管理され、機能追加や改善が行われると自動的にバージョンアップします。</p>
                    
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4>バージョン表示</h4>
                            <p>画面上部にバージョン番号が表示されます。クリックすると更新履歴を確認できます。</p>
                        </div>
                        <div class="feature-card">
                            <h4>自動更新通知</h4>
                            <p>新しい機能が追加されると、システムが自動的に通知します。</p>
                        </div>
                    </div>

                    <div class="tip-box">
                        バージョン表示をクリックすると、システムの更新履歴を確認できます。新機能や改善点をチェックしてみてください。
                    </div>

                    <h3>ショートカット・便利機能</h3>
                    <ul>
                        <li>データ入力フォームでEnterキーを押すと次の項目に移動</li>
                        <li>テーブルの項目をクリックすると編集モードに</li>
                        <li>レポート画面で期間を変更すると自動的に再計算</li>
                        <li>店舗選択を変更すると関連データが自動更新</li>
                        <li>保存状態が画面上部に常時表示される</li>
                        <li>データ処理中はローディング表示で進捗を確認</li>
                        <li>エラー発生時は詳細なエラーメッセージを表示</li>
                    </ul>

                    <h3>パフォーマンス機能</h3>
                    <p>開発環境では、システムのパフォーマンスを監視し、処理時間やメモリ使用量を表示します。これにより、大量データでも快適に動作することを保証しています。</p>
                </div>

                <!-- フッター -->
                <div style="text-align: center; margin-top: 3rem; padding: 2rem; border-top: 1px solid #d6c8b8;">
                    <p style="color: #888;">「もうかりまっか」操作マニュアル</p>
                    <p style="color: #888; font-size: 0.9rem;">このマニュアルについてご質問がございましたら、システム管理者にお問い合わせください。</p>
                    <button class="btn btn-primary" onclick="window.location.href='index.html'" style="margin-top: 1rem;">
                        メイン画面に戻る
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- バージョン管理システム -->
    <script src="js/version.js"></script>
    <script>
        // マニュアル用の簡易バージョン表示
        document.addEventListener('DOMContentLoaded', function() {
            if (window.versionManager) {
                window.versionManager.init();
            }
        });

        // スムーズスクロール
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>